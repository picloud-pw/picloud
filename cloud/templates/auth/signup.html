{% extends 'main_template.html' %}
{% load static %}

{% block title %}
    Регистрация
{% endblock %}

{% block head %}
    <script src='https://www.google.com/recaptcha/api.js'></script>
{% endblock %}

{% block content %}

    <form method="post" action="{% url 'signup' %}" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="container-fluid no-margin-padding">

            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-4"></div>

            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-4 no-margin-padding">

                <div class="container-fluid sign-form">

                    <div class="form-group">
                        <label for="email" class="col-form-label">Почта<b style="color: crimson">*</b></label>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                            <input class="form-control" type="email" value="" name="email" id="email"
                                   placeholder="Введите почту">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="username" class="col-form-label">Логин<b style="color: crimson">*</b></label>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                            <input class="form-control" type="text" name="username" id="username"
                                   placeholder="Придумайте логин">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="password" class="col-form-label">Пароль<b style="color: crimson">*</b></label>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-lock"></i></span>
                            <input class="form-control" type="password" name="password" id="password"
                                   placeholder="Введите пароль">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="second_password" class="col-form-label">Повторите пароль<b
                                style="color: crimson">*</b></label>
                        <div class="input-group">
                            <span class="input-group-addon"><i class="glyphicon glyphicon-repeat"></i></span>
                            <input class="form-control" type="password" name="second_password" id="second_password"
                                   placeholder="Повторите пароль">
                        </div>
                    </div>

                    <div id="error" class="error">
                        {% if error %} <p>{{ error }}</p> {% endif %}
                    </div>

                    <div class="container-fluid" style="text-align: center; margin-bottom: 10px">
                        <div class="g-recaptcha" style="display: inline-block"
                             data-sitekey="6LcjsksUAAAAAEKIzQNR60uz9k1UiTO6vDEmW86k"></div>
                    </div>

                    <p class="small">
                        Нажимая кнопку «Зарегистрироваться», вы соглашаетесь с&nbsp;<!--
                        --><a href="{% url 'privacy_policy' %}" target="_blank"><!--
                        -->Политикой обработки персональных данных</a>
                        (ссылка откроется в&nbsp;новой вкладке).
                    </p>

                    <div class="form-group">
                        <input class="btn btn-primary col-xs-12" type="submit" value="Зарегистрироваться"/>
                    </div>

                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-3 col-lg-4"></div>

        </div>

    </form>

{% endblock %}


{% block js %}

    <script src="{% static 'js/ready.js' %}"></script>
    <script src="{% static "js/department_search.js" %}"></script>

    <script>
        ready(function () {
            clearAndDisableAllLists();
            loadUniversities();

            document.getElementById("id_university").addEventListener("change", () => {
                universityChanged(document.getElementById("id_university").value);
            });
            document.getElementById("id_department").addEventListener("change", () => {
                departmentChanged(document.getElementById("id_department").value);
            });
            document.getElementById("id_chair").addEventListener("change", () => {
                chairChanged(document.getElementById("id_chair").value);
            });
            document.getElementById("id_program").addEventListener("change", () => {
                programChanged(document.getElementById("id_program").value);
            });
        });
    </script>

{% endblock %}
